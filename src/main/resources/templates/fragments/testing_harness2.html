<!doctype html>
<html  xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>My Workspace</title>

 <style>
	.datatable-toolbar {
		padding: .20rem !important
	}
	
	div.action-buttons {
        white-space: nowrap;
    }
 
    div.action-buttons span {
        display: inline-block;
        min-width: 18px;
        cursor: pointer;
    }
     td.details-control sorting_1 dtr-control {
		display: inline-block;
        min-width: 18px;		
	}   
 	#assetDataTable td:nth-child(6) { min-width: 240px; } 
 	#assetDataTable td:nth-child(12) { min-width: 200px; }  	
    
</style> 

	<script>
    	
		$(document).ready(function() {
	
			hideSpinner();	
			
			if( $('#assetDataTable').length){     			
     			var table = $('#assetDataTable').DataTable( {
            	retrieve: true,
     	 		searchHighlight: true,
             	responsive: true,		        
             	"paging":   true,          
             	order: [2, 'asc' ],		        		             
     	    	ajax: {
           		    url: 'getUidProductAttributes',
           		 	type: 'POST',
            		contentType: 'application/json',
            		data: function ( data ) {
            			showSpinner();            	
            			var myData = {version:"1.0", clientId:"locuslink"};
            			var innerData = {};    
            			myData["data"] = innerData;	                  			
                		return JSON.stringify( myData );
     	        }, 
     	        "dataSrc": function (json) {
     	        	uidProductAttributeList_List = json.data.uidProductAttributeList_List;	     	        	
     	        	hideSpinner();		    		     	      	        	
     	        //	console.log(JSON.parse(uniqueassetlist));
     	        	return JSON.parse(uidProductAttributeList_List);     	        	      	        	
     	         }					       
        		},       
             columns: [	                	 
	 			 { "className": 'details-control',
 	               "orderable": false,
 	               "data":      null,
 	               "defaultContent": ''
	 	         },	 	                       	      
	 	         { title: "Details",
	 	           data: null,
 	               className: "controlColumns",
 	               "render": function(data, type, row, meta){	            		
                    	data ="<div class='action-buttons'>" 
/*                     	+"<button id='docs_" + row.uniqueAssetPkId+ "' class='button button--text'  type='button'> <i class='fas fa-chart-bar fa-lg' title='Attachment List Viewer'></i></button>&nbsp;"
                    	+"<button id='barcode_" + row.uniqueAssetPkId+ "' class='button button--text' type='button'> <i class='fas fa-file-invoice fa-lg' title='BarCode Viewer'></i></button>&nbsp;" */
                    	+"<button id='detail_" + row.uidPalPkId+ "' class='button button--text' type='button'> <i class='far fa-trash-alt fa-lg' title='Attribute Viewer'></i></button></div>";	                    
	                return data;
	 	         }},      
	 	         { data: "industryPkId" },	 
	             { data: "industryDesc" },	
	             { data: "subIndustryPkId" },   	             
                 { data: "subIndustryDesc" },   
                 { data: "productTypePkId" },        
                 { data: "productTypeDesc" }, 
                 
                 { data: "productSubTypePkId" },        
                 { data: "productSubTypeDesc" }, 
                 
                 { data: "uidPalPkId" },                 
                 { data: "uidGenSeq" },
                 { data: "uidPalName" },
                 { data: "uidPalAttributesJson" }

            	],
            	        		
             	dom: '<t><"datatable-pagination d-flex flex-row justify-content-center justify-content-md-between align-items-center mt-2" <"datatable-pagination-group d-none d-md-block" l><"datatable-pagination-group" p><"datatable-pagination-group d-none d-md-block" i>>',
             	             	        		            	          
           });
     	 }	
			
						
			$('#comboSelectedIndustry').val( $('#selectedIndustryPkId').val().trim() + '_' + $('#selectedIndustryUid').val().trim() );	
			$('#comboSelectedSubIndustry').val( $('#selectedSubIndustryPkId').val().trim()  + '_' +$('#selectedSubIndustryUid').val().trim()   );	
 			$('#comboSelectedVersion').val($('#selectedVersionPkId').val().trim()  + '_' + $('#selectedVersionUid').val().trim() );
			$('#comboSelectedProductType').val($('#selectedProductTypePkId').val().trim() + '_' +$('#selectedProductTypeUid').val().trim() );	
			
			// Industry
			$('#comboSelectedIndustry').change(function () {	
				var wrkIdArray =  $('#comboSelectedIndustry').val().trim().split("_");				
				$('#selectedIndustryPkId').val(  wrkIdArray[0]  );
				$('#selectedIndustryUid').val(  wrkIdArray[1]  );								
				$('#uidGenString').val(wrkIdArray[1]);					
				showSpinner();			
				submitFormAjaxHTML('processIndustrySelected', $( "#uidGeneratorFormDTO" ).serialize(), "initCommonResponse");								
			});	
			
			
			// Sub Industry
			$('#comboSelectedSubIndustry').change(function () {		
				var wrkIdArray =  $('#comboSelectedSubIndustry').val().trim().split("_");	
				$('#selectedSubIndustryPkId').val( wrkIdArray[0] );		
				$('#selectedSubIndustryUid').val( wrkIdArray[1] );					
				$('#uidGenString').val( $('#uidGenString').val() + wrkIdArray[1]);									
				showSpinner();			
				submitFormAjaxHTML('processSubIndustrySelected', $( "#uidGeneratorFormDTO" ).serialize(), "initCommonResponse");								
			});	
			
			
			// Version
			$('#comboSelectedVersion').change(function () {	
				var wrkIdArray =  $('#comboSelectedVersion').val().trim().split("_");	
				$('#selectedVersionPkId').val( wrkIdArray[0] );		
				$('#selectedVersionUid').val( wrkIdArray[1] );						
				$('#uidGenString').val( $('#uidGenString').val() + wrkIdArray[1]);
				
			});	
			
			// Product Type
			$('#comboSelectedProductType').change(function () {	
				var wrkIdArray =  $('#comboSelectedProductType').val().trim().split("_");	
				$('#selectedProductTypePkId').val( wrkIdArray[0] );			
				$('#selectedProductTypeUid').val( wrkIdArray[1] );		
				$('#uidGenString').val( $('#uidGenString').val() + wrkIdArray[1]);				
				showSpinner();			
				submitFormAjaxHTML('processProductTypeSelected', $( "#uidGeneratorFormDTO" ).serialize(), "initCommonResponse");	
			});	
			
			
			// Product Sub Type
			$('#comboSelectedProductSubType').change(function () {	
				var wrkIdArray =  $('#comboSelectedProductSubType').val().trim().split("_");	
				$('#selectedProductSubTypePkId').val( wrkIdArray[0] );			
				$('#selectedProductSubTypeUid').val( wrkIdArray[1] );		
				$('#uidGenString').val( $('#uidGenString').val() + wrkIdArray[1]);				
				showSpinner();			
				submitFormAjaxHTML('processProductSubTypeSelected', $( "#uidGeneratorFormDTO" ).serialize(), "initCommonResponse");	
			});	
			
			
			
			
	  		// SEARCH FILTER
	  		$('#assetDataTable_filter input').keyup(function(){
	 			table.search($(this).val()).draw() ;
	 		});  
	  		
	  		
			
		});
		
		
		function initCommonResponse(returnData) {	
			//	console.log("initCommonResponse()");
				hideSpinner();
				$('#mainBody').html( returnData); 
		}
		
		
	</script>
	
  </head>


<body id="Body" >
	 		 	 			
<form id="uidGeneratorFormDTO" class="bg-light" name="uidGeneratorFormDTO"  th:value="${uidGeneratorFormDTO}" method="post"> 
 	 	    	 		
      <input type=hidden id="selectedIndustryPkId" name="selectedIndustryPkId" th:value="${uidGeneratorFormDTO.selectedIndustryPkId}" readonly>    
      <input  type=hidden id="selectedIndustryUid" name="selectedIndustryUid" th:value="${uidGeneratorFormDTO.selectedIndustryUid}" readonly>
        
      <input type=hidden id="selectedSubIndustryPkId" name="selectedSubIndustryPkId"  th:value="${uidGeneratorFormDTO.selectedSubIndustryPkId}" readonly>    
      <input type=hidden id="selectedSubIndustryUid" name="selectedSubIndustryUid"  th:value="${uidGeneratorFormDTO.selectedSubIndustryUid}" readonly> 
        
      <input type=hidden id="selectedVersionPkId" name="selectedVersionPkId"  th:value="${uidGeneratorFormDTO.selectedVersionPkId}" readonly>  
      <input type=hidden id="selectedVersionUid" name="selectedVersionUid"  th:value="${uidGeneratorFormDTO.selectedVersionUid}" readonly>  
      
      <input  type=hidden id="selectedProductTypePkId" name="selectedProductTypePkId"  th:value="${uidGeneratorFormDTO.selectedProductTypePkId}" readonly>
      <input  type=hidden id="selectedProductTypeUid" name="selectedProductTypeUid"  th:value="${uidGeneratorFormDTO.selectedProductTypeUid}" readonly>       
         		  
      <input  type=hidden id="selectedProductSubTypePkId" name="selectedProductSubTypePkId"  th:value="${uidGeneratorFormDTO.selectedProductSubTypePkId}" readonly>
      <input  type=hidden id="selectedProductSubTypeUid" name="selectedProductSubTypeUid"  th:value="${uidGeneratorFormDTO.selectedProductSubTypeUid}" readonly>              		  
         		    		  
	  <section id="manage_1_mainBody" class="de-component de-component--gray">
			
		<div class="de-component__container">
	    	<header class="de-component-header">
	            <h2 class="de-component-header__title">Testing Harness</h2>
	        </header>		        
	        <header class="de-component-header">
	            <h2 class="de-component-header__title">UID Generation - Decision Tree</h2>
	        </header>		        
	    </div>

       <label class="d-inline-block mb-3" >generated UID : 
         <input  id="uidGenString" name="uidGenString" th:value="${uidGeneratorFormDTO.uidGenString}" readonly> 
       </label>
					
		<br>
		<br>
	
 		<div id="industryId"  class="d-flex justify-content-between"> 
			<select class="form-control mb-3" id="comboSelectedIndustry" name="comboSelectedIndustry" th:field="*{uidDtoIndustryList}" style="width: 260px">
	           	<option value="_"> -- Select Industry</option>            	
	            <option th:each="entry : ${uidDtoIndustryList}"  th:value="${entry.industryPkId}+'_'+${entry.industryUid}"  th:utext="${entry.industryDesc} "/>              
	        </select> 
		 </div> 
				
 		<div id="subIndustryId"  class="d-flex justify-content-between">
			<select class="form-control mb-3" id="comboSelectedSubIndustry" name="comboSelectedSubIndustry" th:field="*{uidDtoSubIndustryList}" style="width: 260px">
            	<option value="_"> -- Select Sub Industry</option>
                <option th:each="entry : ${uidDtoSubIndustryList}"  th:value="${entry.subIndustryPkId}+'_'+${entry.subIndustryUid}"   th:utext=" ${entry.industryCode}+':'+${entry.subIndustryDesc} "/>
            </select> 
	 	</div>  
		
		<div  id="versionId"  class="d-flex justify-content-between">	
			<select class="form-control mb-3" id="comboSelectedVersion" name="comboSelectedVersion" style="width: 260px">
				<option value="_"> -- Select Version</option>
				<option value="1_10" >Version 1.0</option>
				<option value="2_11">Version 1.1</option>	
			    <option value="3_12" >Version 1.2</option>
				<option value="4_13">Version 1.3</option>	
				<option value="5_20">Version 2.0</option>
				<option value="6_21">Version 2.1</option>												      											
			</select>	
		</div> 
						
 		<div  id="productTypeId"  class="d-flex justify-content-between">
			<select class="form-control mb-3" id="comboSelectedProductType" name="comboSelectedProductType" th:field="*{uidDtoProductTypeList}" style="width: 260px">
            	<option value="_"> -- Select Asset Type</option>
                <option th:each="entry : ${uidDtoProductTypeList}"  th:value="${entry.productTypePkId}+'_'+${entry.productTypeUid}"   th:utext="${entry.productTypeDesc} "/>           
            </select> 
		</div> 
		
	 	<div  id="productSubTypeId"  class="d-flex justify-content-between">
			<select class="form-control mb-3" id="comboSelectedProductSubType" name="comboSelectedProductSubType" th:field="*{uidDtoProductSubTypeList}" style="width: 260px">
            	<option value="_"> -- Select Asset Sub Type</option>
                <option th:each="entry : ${uidDtoProductSubTypeList}"  th:value="${entry.productSubTypePkId}+'_'+${entry.productSubTypeUid}"   th:utext="${entry.productSubTypeDesc} "/>
            </select> 
		</div>		
		


 	<section id="myworksoace_asset_section" class="de-component de-component--gray">  
			
        <div class="form-group text-center">
			<div class="card">
	
				<div class="card-header"><i class="fas fa-user mr-2"></i> UID Catalog Data:			
				</div>				
	
				<div class="de-component__container">				
	                    
					 <div class="datatable-toolbar border border-bottom-0 text-secondary d-flex justify-content-between align-items-center py-2 px-3">						 	
					 	<div class="datatable-toolbar-group">
<!-- 					 		<div id="addbtn">
					 			<button class="button button--secondary-reversed w-auto"   type="button" data-toggle="modal" data-target="#addUserModal" id="addEditUserlink"> Add </button>
					 		</div> -->
					 	</div>
					 
					 	<div class="datatable-toolbar-group">
					 		<div id="assetDataTable_filter" class="dataTables_filter">
					 			<label class="d-flex align-items-center">Search: <input type="search" class="form-control w-auto" placeholder="" aria-controls="assetDataTable"></label>
					 		</div> 
					 	</div>
					 </div>	                     
	                  
	                 <div id="xxxx">		                     
	  	 					<table id="assetDataTable" class="bg-white border border-top-0" style="width:100%"> 	            	              		 	              		 
	                          <thead class="thead-light">
	                             <tr>	                             
	     							<th scope="col"></th>       
	     							<th scope="col"></th>   
	                                <th scope="col">iId</th>	                                 	                          	                                 
	                                <th scope="col">industryDesc</th>
	                                <th scope="col">siId</th>	
	                                <th scope="col">subIndustryDesc</th>	                                
                                    <th scope="col">ptId</th>	                                 	                          	                                 
	                                <th scope="col">productTypeDesc</th>
	                                <th scope="col">pstId</th>	
	                                <th scope="col">productSubTypeDesc</th>
	                                <th scope="col">upalId</th>	
	                                <th scope="col">UID Seq</th>
	                                <th scope="col">Attr Name</th>
	                                <th scope="col">Attr Values</th>	                                	                               
	                             </tr>
	                          </thead>
	                       </table>
	                 </div>		                                                       
				</div> 
									
			<br><br>                               
            <div class="py-4 text-center px-0 d-flex justify-content-between d-sm-block">
                 <button type="button" id="previous" class="button button--continue">Previous</button>
            </div>
	                                                             
			</div>
		
    </div>
								
	</section>
	
	
	
	
</section>
	
</form>	
	
	      
 </body>
  
</html>



