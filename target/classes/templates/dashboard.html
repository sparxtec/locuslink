<!doctype html>

<html  xmlns:th="http://www.thymeleaf.org"
 	   xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE10"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    
    <!-- CSRF Token -->
    <meta th:name="_csrf" th:content="${_csrf.token}"/>
	<meta th:name="_csrf_header" th:content="${_csrf.headerName}"/>

    <title>Dashboard</title>

	<!-- StyleSheets - ORDER IS IMPORTANT -->
	<link href="css/dropzone.css" rel="stylesheet">	
	<link href="css/datatables/datatables.css" rel="stylesheet">
	<link href="css/fontawesome-all-5.4.2.css"  rel="stylesheet">
	<link href="css/de-styles.css" rel="stylesheet">
	<link href="css/de-dashboard-styles.css" rel="stylesheet">
	<link href="css/jquery-ui-1.12.1.min.css" rel="stylesheet">
	<link href="css/progress-bar.css" rel="stylesheet">
	<link href="css/med.css"  rel="stylesheet" type="text/css" media="print, projection, screen" />
	<link href="css/calendar.css"  rel="stylesheet"  type="text/css" media="print, projection, screen" />
	
    <!-- new 1-9-2022 -->
    <link href="https://unpkg.com/bs-stepper@1.3.0/dist/css/bs-stepper.min.css" rel="stylesheet">



	 <!-- JavaScript -->
	<script src="js/jquery-3.3.1.js"></script>
	<script src="js/popper.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/gim.common.js"></script>
	<script src="js/datatables/datatables.js"></script>
	<script src="js/moment.js"></script>


	<script src="js/jquery-ui-1.12.1.min.js"></script>
	<script src="js/jquery.hideseek.min.js"></script>
	<script src="js/dropzone.js"></script>

	<!-- new 1-9-2022 -->
	<script src="https://unpkg.com/bs-breakpoints@1.0.0/dist/bs-breakpoints.min.js"></script>
	<script src="https://unpkg.com/bs-stepper/dist/js/bs-stepper.min.js"></script>

	<!-- new 2-06-2023  needed for data table search and highlight -->
	<script src="//cdn.datatables.net/plug-ins/1.13.2/features/searchHighlight/dataTables.searchHighlight.min.js"></script>
	<link href="//cdn.datatables.net/plug-ins/1.13.2/features/searchHighlight/dataTables.searchHighlight.css" rel="stylesheet">		
	<script src="//bartaz.github.io/sandbox.js/jquery.highlight.js"></script>

	<script type="text/javascript" src="js/jquery.hideseek.min.js"></script>  	
	<script src="js/pdfobject.js"></script>
	
<!-- 	<link href="css/gim.datatables.css" rel="stylesheet"> -->
		
		
		
<style>
table.dataTable thead th {
  font-size: 1.2rem;
 }
</style>

	<script>
		$(document).ready(function() {
			setupAjaxSend();
			// Retrieve token
			var token = $("meta[name='_csrf']").attr("content");
		    var header = $("meta[name='_csrf_header']").attr("content");
			
		    console.log("Get token: ", token, header);

			// Sign Out
/* 			$('#logoutPage').click(function() {
				showSpinner();
				submitFormHTML('initsignout', 'dashboardFormDTO');
			}); */


			// **************************************
			// **  Navigation Events
			// **************************************

			// Home
			$('#buttonHeaderHomeId').click(function() {
				showSpinner();
				submitFormHTML('initDashboard', 'dashboardFormDTO');
			});

		    //  My Workspace
			$('#buttonHeaderMyWorkspaceId').click(function() {
				showSpinner();
				submitFormAjaxHTML('initMyWorkspace', $( "#dashboardFormDTO" ).serialize(), "initCommonResponse");
				$('.is-current').removeClass('is-current');
				$('#buttonHeaderMyWorkspaceId').addClass('is-current');
			});

		    
		    // 04-28-2023 DEMO 
	        var viewAssetFlag = $('input#cameFromLocusViewBarCodeViewer').val();
			//console.log (viewAssetFlag);
			if (viewAssetFlag === 'yes') {
				 $('input#cameFromLocusViewBarCodeViewer').val("no");
				showSpinner();
				submitFormAjaxHTML('initViewAssetData', $( "#dashboardFormDTO" ).serialize(), "initCommonResponse");
				$('.is-current').removeClass('is-current');
				$('#buttonHeaderMyWorkspaceId').addClass('is-current');		
			}
		    
		    
		    
			$('#buttonMyWorkspaceId').click(function() {
				showSpinner();
				submitFormAjaxHTML('initMyWorkspace', $( "#dashboardFormDTO" ).serialize(), "initCommonResponse");
				$('.is-current').removeClass('is-current');
				$('#buttonHeaderMyWorkspaceId').addClass('is-current');				
			});
								
			//  Upload
			$('#buttonHeaderUploadId').click(function() {
				showSpinner();
				submitFormAjaxHTML('initUpload', $( "#dashboardFormDTO" ).serialize(), "initCommonResponse");
				$('.is-current').removeClass('is-current');
				$('#buttonHeaderUploadId').addClass('is-current');	
			});
			
			$('#buttonUploadId').click(function() {
				showSpinner();
				submitFormAjaxHTML('initUpload', $( "#dashboardFormDTO" ).serialize(), "initCommonResponse");
				$('.is-current').removeClass('is-current');
				$('#buttonHeaderUploadId').addClass('is-current');	
			});

			
			
		    //  Testing Harness
			$('#buttonHeaderTestHarnessId').click(function() {
				showSpinner();
				submitFormAjaxHTML('initTestHarness', $( "#dashboardFormDTO" ).serialize(), "initCommonResponse");
				$('.is-current').removeClass('is-current');
				$('#buttonHeaderBarcodeId').addClass('is-current');	
			});
			




			
			
			
			/////////// ***********************************************************  //////////
			/////////// **************      Account Events      *******************  //////////
			/////////// ***********************************************************  //////////

			$('#accountProfileId').click(function() {
				showSpinner();
				submitFormAjaxHTML('initProfile', $( "#dashboardFormDTO" ).serialize(), "initCommonResponse");
				$('.is-current').removeClass('is-current');
				$('#buttonHeaderAccountId').addClass('is-current');
			});

			$('#accountLogout').click(function() {
				showSpinner();
				submitFormHTML('initLogout', 'dashboardFormDTO');
			});
			
	
	
/* 			$('#XXXXXXXaccountLogout').click(function() {
				showSpinner();

				url = 'initLogout';
				datastring = $( "#dashboardFormDTO" ).serialize();
				responseMethodName = "initCommonResponse";

				var appLogoutUrl = $('#appLogoutUrl').val();

			     $.ajax({
			         type: "POST",
			         url: url,
			         crossDomain: true,
			         headers: {
			               "accept": "application/json",
			                "Access-Control-Allow-Origin":"*",
			                "Access-Control-Allow-Credentials":true,
			             "Access-Control-Allow-Headers": "Accept, Origin, Content-Type, Depth, User-Agent, If-Modified-Since, x-auth-token,x-requested-by, Cache-Control, Authorization, X-Req, X-File-Size, X-Requested-With, X-File-Name",
			               "Access-Control-Allow-Methods": "POST, GET, OPTIONS, PUT, DELETE",
			               "Access-Control-Max-Age": "36002"
			           },
			         data: datastring,
			         success: function (data) {
			 		},
			 		 error: function (data) {
			 		 }
			 	 });

			     window.open(appLogoutUrl, '_self');
			    // window.location.replace(appLogoutUrl);


				$('.is-current').removeClass('is-current');
				$('#buttonHeaderAccountId').addClass('is-current');
			}); */



 			//Navigation dropdown
			var de = {};
			var activeClass = 'is-active';
			var nav = document.querySelector('.de-header-nav__group');
			var navItems = nav.getElementsByClassName('de-header-nav__item');
			var parentLinks = nav.getElementsByClassName('js-trigger-header-nav-dropdown');

			de.removeActive = function () {
			  [].forEach.call(parentLinks, function (item) {
			    item.classList.remove(activeClass);
			  });
			};

			[].forEach.call(parentLinks, function (item) {
			  item.addEventListener('click', function (e) {
			    if (this.classList.contains(activeClass)) {
			      de.removeActive();
			    } else {
			      de.removeActive();
			      this.classList.add(activeClass);
			    }
			  });
			});
			[].forEach.call(parentLinks, function (link) {
			  link.addEventListener('click', function (e) {
			    e.preventDefault();
			    e.stopPropagation();
			  });
			});

			// remove active dropdown if clicking anywhere else on the screen
			$(document).on('click', function(){
				de.removeActive();
			}); 

		});

		function initCommonResponse(returnData) {
			hideSpinner();
			$('#mainBody').html( returnData);
		}

		$(window).resize(function(){
			$('#mobileNav').removeClass(['collapse', 'show']);
		});

	</script>



<script>

$('#accountLogout').click(function() {
	showSpinner();
	submitFormHTML('initLogout', 'dashboardFormDTO');
});

</script>



  </head>


  <body id="Body" class="de-body de-trace"  >
	<div th:replace="fragments/header :: header"></div>

    <!-- Import Spinner Modal -->
	<div th:replace="fragments/spinnermodal :: spinnermodal"></div>


    <div class="de-content de-component--gray ">

	    <form id="dashboardFormDTO" name="dashboardFormDTO" th:object="${dashboardFormDTO}"  method="post" class="w-100">

<!-- redirect to viewer when url clicked on the printer barcode -->
		     <input type="hidden" th:value="${cameFromLocusViewBarCodeViewer}" name="cameFromLocusViewBarCodeViewer"  id="cameFromLocusViewBarCodeViewer" />


		     <input type="hidden" th:value="${appLogoutUrl}" name="appLogoutUrl"  id="appLogoutUrl" />
		     <!-- CSRF token -->
			 <input type="hidden" th:name="${_csrf.parameterName}"   th:value="${_csrf.token}"/>

	        <main id="mainBody" role = "main" class="de-content__main">

	         	<header class="de-page-header de-component--white">
					<div class="de-page-header__container">
						<img class="de-component-header__icon" src="images/electron/icons/icon-badge-check-ll.svg" alt="badge check dashboard">
						<h1 class="de-page-header__title">Welcome to Locuslink !</h1>
						<p class="de-component-header__intro">Utilities Asset Management</p>


<!--  <br>User ->:
<span sec:authentication="principal">Principal</span>
<br>Role ->:
<span sec:authentication="credentials">credentials</span> -->


					</div>
				</header>


	            <section class="de-component">

	                <div class="de-component__container">

	                  	<header class="de-component-header">
	                        <h2 class="de-component-header__title">Quicklinks</h2>
	                    </header>


						<div class="nav-cards nav-cards--big-icon">

							<ul class="nav-cards__items">

								<li sec:authorize="hasAnyRole('LOCUSLINK-ADMIN')"  class="nav-cards__item"   >
									<a id="buttonMyWorkspaceId"  href="#" target="_self" class="nav-card nav-card--big-icon">
										<picture class="nav-card-media">
											<img src="images/electron/icons/icon-clipboard-ll.jpeg" alt="clipboard">
										</picture>
										<div class="nav-card-body">
									    	<h3 class="nav-card-body__title text-nowrap"><span>My Workspace</span></h3>
										</div>
									</a>
							   </li>
							   
							   <li sec:authorize="hasAnyRole('LOCUSLINK-ADMIN')"  class="nav-cards__item"   >
									<a id="buttonUploadId"  href="#" target="_self" class="nav-card nav-card--big-icon">
										<picture class="nav-card-media">
											<source srcset="images/electron/icons/icon-arrow-up-ll.jpeg?h=195&amp;w=195" media="(min-width: 600px)">
											<img class="nav-card-media__image" src="images/electron/icons/icon-arrow-up=ll.jpeg?h=195&amp;w=195" alt="arrow up">
										</picture>
										<div class="nav-card-body">
									    	<h3 class="nav-card-body__title"><span>Upload</span></h3>
										</div>
									</a>
								</li>


							 	<li sec:authorize="hasAnyRole('LOCUSLINK-ADMIN')"    class="nav-cards__item"  >
									<a id="buttonBarcodeId"  href="#" target="_self" class="nav-card nav-card--big-icon">
										<picture class="nav-card-media">
											<img src="images/electron/icons/icon-three-gears-ll.jpeg" alt="three gears">
										</picture>
										<div class="nav-card-body">
									    	<h3 class="nav-card-body__title text-nowrap"><span>Barcode</span></h3>
										</div>
									</a>
								</li>

							</ul>
						</div>

	                </div>
	            </section>
	        </main>
        </form>
    </div>





	<div th:replace="fragments/footer :: footer"></div>
  </body>

</html>