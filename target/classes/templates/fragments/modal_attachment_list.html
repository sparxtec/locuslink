<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
 <head>
   <meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE10"/>	 	
</head>


<script>	

	$(document).ready(function() {					
		        
		hideSpinner();	
	   	$("#modal_barcode_viewer").modal('show');	
	   	
    	$('#backButtonId').click(function() {													
    		showSpinner();			
    		submitFormAjaxHTML('initViewAssetData', $( "#dashboardFormDTO" ).serialize(), "commonResponse"); 
    	});
    	    	
  
		if( $('#attachmentDataTable').length){    
			
 			var table = $('#attachmentDataTable').DataTable( {
        	retrieve: true,
 	 		searchHighlight: true,
         	responsive: true,		        
         	"paging":   true,          
         	order: [2, 'asc' ],		
         	
 	    	ajax: {
       		    url: 'getAllAssetAttachments',
       		 	type: 'POST',
        		contentType: 'application/json',
        		data: function ( data ) {
        			showSpinner();            	
        			var myData = {version:"1.0", clientId:"locuslink"};
        			var innerData = {};    
        			myData["data"] = innerData;	                  			
            		return JSON.stringify( myData );
 	        }, 
 	        
 	        "dataSrc": function (json) {
 	        	assetAttachmentlist = json.data.assetAttachmentlist;	     	        	
 	        	hideSpinner();	
 	        	
 	        	console.log(JSON.parse(assetAttachmentlist));
 	        	
 	        	return JSON.parse(assetAttachmentlist);     	        	      	        	
 	         }					       
    		},  
 
         columns: [	                	 
 			 { "className": 'details-control',
	               "orderable": false,
	               "data":      null,
	               "defaultContent": ''
 	         },	 	                       	      
 	         { title: "Details",
 	           data: null,
	               className: "controlColumns",
	               "render": function(data, type, row, meta){	            		
                	data ="<div class='action-buttons'>" 
                	+"<button id='docs_" + row.uniqueAssetPkId+ "' class='button button--text'  type='button'> <i class='fas fa-chart-bar fa-lg' title='Doc Viewer'></i></button>&nbsp;"
                	+"<button id='barcode_" + row.uniqueAssetPkId+ "' class='button button--text' type='button'> <i class='fas fa-file-invoice fa-lg' title='BarCode Viewer'></i></button>&nbsp;"
                	+"<button id='delete_" + row.uniqueAssetPkId+ "' class='button button--text' type='button'> <i class='far fa-trash-alt fa-lg' title='Delete'></i></button></div>";	                    
                return data;
 	         }}, 
               	         
             { data: "uniqueAssetPkId" },	               
             { data: "uniqueAssetId" },   
             { data: "universalCatalogId" },                   
             { data: "manufacturerName" },                 
             { data: "productTypeCode" },
             { data: "productName" },
             { data: "productNumber" },
             { data: "traceTypeCode" },
             { data: "traceCode" },                 
             { data: "customerName" },
             { data: "productDesc" },
             { data: "productTypeDesc" },
             { data: "uniqueAttributesJson" }
        	],
        	    		
         	dom: '<t><"datatable-pagination d-flex flex-row justify-content-center justify-content-md-between align-items-center mt-2" <"datatable-pagination-group d-none d-md-block" l><"datatable-pagination-group" p><"datatable-pagination-group d-none d-md-block" i>>',
         	             	        		            	          	
       });
 	 }
    	
    	
    	
	});
	

	
 	function commonResponse(returnData) {	
		hideSpinner();
		$('#mainBody').html(returnData); 
		hideSpinner();			 
    }
	 
</script>
	
<body>

	<div th:fragment="messageLogModal">
		
		<div th:id="modal_barcode_viewer" class="modal " tabindex="-1" role="dialog" aria-labelledby="classInfo"  data-keyboard="false" data-backdrop="static">
		  
		  <div class="modal-dialog modal-xl" >
		    
		    <div class="modal-content ">
		      
		      <div class="modal-header ">      
			      <h1 class="modal-title w-100 text-center"><strong>Asset Attachments</strong></h1>
			      <button type="button" id="backButtonId" class="button button--continue ml-3" data-dismiss="modal" >Back</button>			       			        
		      </div>
		      
		      
		      <div class="modal-body " >      


        <div class="form-group text-center">
			<div class="card">
	
				<div class="card-header"><i class="fas fa-user mr-2"></i> Asset Data:			
				</div>				
	
				<div class="de-component__container">				
	                    
					 <div class="datatable-toolbar border border-bottom-0 text-secondary d-flex justify-content-between align-items-center py-2 px-3">						 	
					 	<div class="datatable-toolbar-group">
					 		<div id="addbtn">
					 			<button class="button button--secondary-reversed w-auto"   type="button" data-toggle="modal" data-target="#addUserModal" id="addEditUserlink"> Add </button>
					 		</div>
					 	</div>
					 
					 	<div class="datatable-toolbar-group">
					 		<div id="attachmentDataTable_filter" class="dataTables_filter">
					 			<label class="d-flex align-items-center">Search: <input type="search" class="form-control w-auto" placeholder="" aria-controls="attachmentDataTable"></label>
					 		</div>
					 	</div>
					 </div>	                     
	                  
	                 <div id="xxxx">		                     
	  	 					<table id="attachmentDataTable" class="bg-white border border-top-0" style="width:100%"> 	            	              		 	              		 
	                          <thead class="thead-light">
	                             <tr>
	     							<th scope="col"></th>       
	     							<th scope="col"></th>   
	                                <th scope="col">Id</th>	                                 	                          	                                 
	                                <th scope="col">Unique Asset ID</th>
	                                <th scope="col">Universal Catalog ID</th>	
	                                <th scope="col">Manufacturer</th>
	                                <th scope="col">Product Type</th>
	                                <th scope="col">Product Name</th>
	                                <th scope="col">Product Number</th>	
	                                <th scope="col">Trace Type</th>	
									<th scope="col">Trace Number</th>		                                                                     	                             	                             
	                             	<th scope="col">Customer</th>
	                                <th scope="col">Product Desc</th>
	                            	<th scope="col">PType Description]</th>
	                                <th scope="col">Unique Attributes</th>
	                             </tr>
	                          </thead>
	                       </table>
	                 </div>		                                                       
				</div> 
									
	                                                            
			</div>
		
    </div>
		          
		        
		      </div>
		      
		      
		      <div class="modal-footer">
		      </div>
		      
		      
		    </div>
		  </div>
		</div> 
	</div>  
	
	

</body>
</html>